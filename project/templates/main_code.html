<div class="stage-tabs">
  <button class="stage-tab active" data-stage="pre">전처리</button>
  <button class="stage-tab" data-stage="model">모델 설계</button>
  <button class="stage-tab" data-stage="train">학습</button>
  <button class="stage-tab" data-stage="eval">평가</button>
</div>

<!-- Preprocessing 코드 -->
<div class="stage-pane" id="pane-code-pre">
  {% if snippet_pre %}
    <div style="display:flex; gap:.5rem; margin-bottom:.5rem;">
      <a class="btn" href="/download/pre">preprocessing.py 다운로드</a>
      <button class="btn btn-run" data-run="pre">이 단계 실행</button>
      <button class="btn" onclick="document.getElementById('tab-log').click()">로그 보기</button>
    </div>
    <pre class="code">{{ snippet_pre | e }}</pre>
  {% else %}
    <p class="muted">Preprocessing 스니펫이 비어 있습니다.</p>
  {% endif %}
</div>

<!-- ModelDesign 코드 -->
<div class="stage-pane" id="pane-code-model" hidden>
  {% if snippet_model %}
    <div style="display:flex; gap:.5rem; margin-bottom:.5rem;">
      <a class="btn" href="/download/model">model.py 다운로드</a>
      <button class="btn btn-run" data-run="model">이 단계 실행</button>
      <button class="btn" onclick="document.getElementById('tab-log').click()">로그 보기</button>
    </div>
    <pre class="code">{{ snippet_model | e }}</pre>
  {% else %}
    <p class="muted">ModelDesign 스니펫이 비어 있습니다.</p>
  {% endif %}
</div>

<!-- Training 코드 -->
<div class="stage-pane" id="pane-code-train" hidden>
  {% if snippet_train %}
    <div style="display:flex; gap:.5rem; margin-bottom:.5rem;">
      <a class="btn" href="/download/train">training.py 다운로드</a>
      <button class="btn btn-run" data-run="train">이 단계 실행</button>
      <button class="btn" onclick="document.getElementById('tab-log').click()">로그 보기</button>
    </div>
    <pre class="code">{{ snippet_train | e }}</pre>
  {% else %}
    <p class="muted">Training 스니펫이 비어 있습니다.</p>
  {% endif %}
</div>

<!-- Evaluation 코드 -->
<div class="stage-pane" id="pane-code-eval" hidden>
  {% if snippet_eval %}
    <div style="display:flex; gap:.5rem; margin-bottom:.5rem;">
      <a class="btn" href="/download/eval">evaluation.py 다운로드</a>
      <button class="btn btn-run" data-run="eval">이 단계 실행</button>
      <button class="btn" onclick="document.getElementById('tab-log').click()">로그 보기</button>
    </div>
    <pre class="code">{{ snippet_eval | e }}</pre>
  {% else %}
    <p class="muted">Evaluation 스니펫이 비어 있습니다.</p>
  {% endif %}
</div>